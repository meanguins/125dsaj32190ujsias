<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpecificaÈ›ii Interactive & Ghid - Procesator Inteligent de CV-uri</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Chosen Palette: Calm Neutrals with Sky Blue Accent */
        /* Application Structure Plan: Single-page application with tab-based navigation (Prezentare GeneralÄƒ, FuncÈ›ionalitÄƒÈ›i, Schema de ExtracÈ›ie, Tehnologii, Configurare Sistem, Ghid Utilizare, Integrare Recruit CRM, ConsideraÈ›ii). Content displayed dynamically. Interactive schema viewer. Data flow diagram visualization. Designed for easy understanding of the backend system's technical specifications, setup, usage, and specific CRM integration. */
        /* Visualization & Content Choices: Overview: Text, HTML/CSS data flow diagram. Features: Clickable text sections. Data Schema: Interactive nested list for CV_EXTRACTION_SCHEMA. Tech Stack: List. Considerations: Expandable text. Setup & Usage & Recruit CRM: Detailed step-by-step text, code blocks for examples. No Chart.js/Plotly as report is spec, not data. Focus on HTML/CSS for visuals. NO SVG/Mermaid. */
        /* CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. */
        body {
            font-family: 'Inter', sans-serif; 
            line-height: 1.6; 
        }
        .tab-active {
            border-bottom-width: 3px; 
            border-color: #0284c7; /* sky-600 */
            color: #0284c7; 
            font-weight: 600;
        }
        .tab-button {
             transition: color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .schema-key {
            cursor: pointer;
            font-weight: 500;
            transition: color 0.2s ease;
        }
        .schema-key:hover {
            color: #0ea5e9; /* sky-500 */
        }
        .schema-details {
            display: none;
            padding-left: 1.5rem; 
            border-left: 2px solid #d1d5db; /* gray-300 */
            margin-left: 0.75rem; /* ml-3 */
            margin-top: 0.5rem; /* mt-2 */
        }
        .schema-details.open {
            display: block;
        }
        .flow-step {
            min-height: 90px; 
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center; 
            padding: 1rem; 
        }
        .flow-step:hover {
            transform: translateY(-4px); 
            box-shadow: 0 6px 16px rgba(0,0,0,0.12); 
        }
        .flow-arrow {
            font-size: 1.75rem; 
            color: #0ea5e9; 
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 90px; 
        }
        .code-block {
            background-color: #1e293b; 
            color: #e2e8f0; 
            padding: 1.25rem; 
            border-radius: 0.5rem; 
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', Courier, monospace;
            font-size: 0.875rem; 
            line-height: 1.5rem; 
            margin-top: 0.75rem; 
            margin-bottom: 0.75rem; 
            border: 1px solid #334155; 
        }
        .code-block span.block {
            display: block; 
        }
        .expand-button {
            transition: color 0.2s ease;
        }
        .expand-button::after {
            content: ' â–¼';
            font-size: 0.75em;
            margin-left: 6px;
            display: inline-block;
            transition: transform 0.2s ease;
        }
        .expand-button.open::after {
            transform: rotate(180deg);
            content: ' â–²'; 
        }
        .step-counter {
            background-color: #0284c7; 
            color: white;
            border-radius: 50%;
            width: 2.25rem; 
            height: 2.25rem; 
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem; 
            flex-shrink: 0; 
        }
        h2.section-title { 
            font-size: 1.75rem; 
            font-weight: 700; 
            color: #0c4a6e; 
            margin-bottom: 1.5rem; 
            padding-bottom: 0.5rem; 
            border-bottom: 2px solid #e0f2fe; 
        }
        h3.step-title {
            display: flex;
            align-items: center;
            font-size: 1.5rem; 
            font-weight: 600; 
            color: #0369a1; 
            margin-bottom: 1rem; 
        }
         h4.sub-step-title {
            font-size: 1.125rem; 
            font-weight: 600; 
            color: #075985; 
            margin-top: 1.25rem; 
            margin-bottom: 0.75rem; 
        }
        .text-content p, .text-content ul, .text-content div > p, .text-content div > ul {
            margin-bottom: 1rem; 
            line-height: 1.7; 
        }
        .text-content ul {
            padding-left: 1.25rem; 
        }
        .text-content strong {
            color: #1e293b; 
        }
        .note {
            background-color: #e0f2fe; 
            border-left: 4px solid #0ea5e9; 
            padding: 1rem;
            margin-top: 1rem; 
            margin-bottom: 1.5rem; 
            border-radius: 0.375rem; 
        }
        .note p {
            margin-bottom: 0.25rem;
            color: #0c4a6e; 
        }
        .note p.font-semibold {
            color: #0369a1; 
        }
        .warning-note {
            background-color: #fef9c3; 
            border-left: 4px solid #f59e0b; 
            padding: 1rem;
            margin-top: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 0.375rem;
        }
        .warning-note p {
             color: #78350f; 
        }
         .warning-note p.font-semibold {
            color: #b45309; 
        }
         .info-note {
            background-color: #f0f9ff; 
            border-left: 4px solid #0ea5e9; 
            padding: 1rem;
            margin-top: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 0.375rem;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-slate-100 text-slate-700 antialiased">

    <header class="bg-sky-700 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <h1 class="text-2xl sm:text-3xl font-bold text-center tracking-tight">SpecificaÈ›ii Interactive & Ghid - Procesator Inteligent de CV-uri</h1>
        </div>
    </header>

    <nav class="bg-white shadow-md sticky top-[68px] sm:top-[76px] z-40">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <ul class="flex flex-wrap justify-center sm:justify-start -mb-px">
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="overview">Prezentare GeneralÄƒ</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="features">FuncÈ›ionalitÄƒÈ›i</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="schema">Schema de ExtracÈ›ie</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="tech">Tehnologii</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="setup">Configurare Sistem</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="usage">Ghid Utilizare API</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="recruitcrm">Integrare Recruit CRM</button></li>
                <li><button class="tab-button inline-block py-3 px-3 sm:py-4 sm:px-4 text-sm sm:text-base text-slate-600 hover:text-sky-600 hover:border-sky-500" data-tab="considerations">ConsideraÈ›ii</button></li>
            </ul>
        </div>
    </nav>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8 mt-6">
        <section id="overview" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">Prezentare GeneralÄƒ a Sistemului</h2>
            <div class="text-content">
                <p>
                    AceastÄƒ aplicaÈ›ie interactivÄƒ vÄƒ ghideazÄƒ prin specificaÈ›iile tehnice, configurarea È™i utilizarea sistemului nostru avansat de procesare automatÄƒ a CV-urilor. Sistemul este conceput ca o soluÈ›ie robustÄƒ È™i scalabilÄƒ, menitÄƒ sÄƒ eficientizeze extragerea informaÈ›iilor structurate din CV-uri, utilizÃ¢nd cele mai noi tehnologii de inteligenÈ›Äƒ artificialÄƒ.
                </p>
                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-sky-700 mb-3">Arhitectura Sistemului È™i Tehnologii Cheie</h3>
                    <p class="mb-3">Sistemul este construit ca o aplicaÈ›ie web FastAPI, containerizatÄƒ cu Docker È™i optimizatÄƒ pentru implementare pe platforme serverless precum Google Cloud Run.</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong class="font-medium">API Backend:</strong> Dezvoltat Ã®n Python folosind framework-ul FastAPI.</li>
                        <li><strong class="font-medium">InteligenÈ›Äƒ ArtificialÄƒ GenerativÄƒ:</strong> UtilizeazÄƒ modelul `gemini-2.5-flash-preview-05-20` de la Google, accesat prin SDK-ul `google-genai`.</li>
                        <li><strong class="font-medium">BazÄƒ de Date NoSQL:</strong> Google Cloud Firestore Ã®n modul Nativ.</li>
                        <li><strong class="font-medium">PlatformÄƒ de Rulare (RecomandatÄƒ):</strong> Google Cloud Run.</li>
                        <li><strong class="font-medium">Containerizare:</strong> Docker.</li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-xl font-semibold text-sky-700 mb-4">Fluxul de Date (End-to-End)</h3>
                    <p class="mb-6">UrmÄƒtoarea diagramÄƒ ilustreazÄƒ paÈ™ii principali Ã®n procesarea unui CV, de la primirea acestuia pÃ¢nÄƒ la stocarea datelor extrase.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-stretch mb-4">
                        <div class="flow-step bg-sky-50 p-4 rounded-lg shadow text-center">
                            <span class="text-3xl mb-2">ğŸ“¥</span>
                            <h4 class="font-semibold text-sky-700 text-base">1. Primire Webhook</h4>
                            <p class="text-xs text-slate-600">Sistem extern trimite CV (text/URL) È™i metadate.</p>
                        </div>
                        <div class="flow-arrow hidden md:flex">â”</div>
                        <div class="flow-step bg-sky-50 p-4 rounded-lg shadow text-center">
                            <span class="text-3xl mb-2">ğŸ›¡ï¸</span>
                            <h4 class="font-semibold text-sky-700 text-base">2. Validare & IdempotenÈ›Äƒ</h4>
                            <p class="text-xs text-slate-600">Verificare secret webhook È™i evitare duplicate.</p>
                        </div>
                        <div class="flow-arrow hidden md:flex">â”</div>
                        <div class="flow-step bg-sky-50 p-4 rounded-lg shadow text-center">
                            <span class="text-3xl mb-2">âš™ï¸</span>
                            <h4 class="font-semibold text-sky-700 text-base">3. Procesare AsincronÄƒ</h4>
                            <p class="text-xs text-slate-600">RÄƒspuns HTTP 202; procesarea continuÄƒ Ã®n fundal.</p>
                        </div>
                    </div>
                    
                    <div class="flex justify-center my-3 md:my-4"><span class="flow-arrow transform md:rotate-0 rotate-90">â¬‡ï¸</span></div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-stretch mb-4">
                        <div class="flow-step bg-teal-50 p-4 rounded-lg shadow text-center">
                            <span class="text-3xl mb-2">ğŸ“„</span>
                            <h4 class="font-semibold text-teal-700 text-base">4. DescÄƒrcare & Parsare (URL)</h4>
                            <p class="text-xs text-slate-600">DescÄƒrcare asincronÄƒ È™i extragere text din PDF/DOCX.</p>
                        </div>
                        <div class="flow-arrow hidden md:flex">â”</div>
                        <div class="flow-step bg-teal-50 p-4 rounded-lg shadow text-center">
                            <span class="text-3xl mb-2">ğŸ§ </span>
                            <h4 class="font-semibold text-teal-700 text-base">5. Extragere Date (Gemini)</h4>
                            <p class="text-xs text-slate-600">Modelul AI extrage informaÈ›ii structurate conform schemei.</p>
                        </div>
                        <div class="flow-arrow hidden md:flex">â”</div>
                        <div class="flow-step bg-teal-50 p-4 rounded-lg shadow text-center">
                            <span class="text-3xl mb-2">ğŸ’¾</span>
                            <h4 class="font-semibold text-teal-700 text-base">6. PersistenÈ›Äƒ (Firestore)</h4>
                            <p class="text-xs text-slate-600">Salvare date iniÈ›iale, status, È™i date extrase.</p>
                        </div>
                    </div>

                    <div class="flex justify-center my-3 md:my-4"><span class="flow-arrow transform md:rotate-0 rotate-90">â¬‡ï¸</span></div>
                    
                    <div class="flow-step bg-indigo-50 p-4 rounded-lg shadow text-center max-w-md mx-auto">
                        <span class="text-3xl mb-2">ğŸ“Š</span>
                        <h4 class="font-semibold text-indigo-700 text-base">7. Verificare Status (OpÈ›ional)</h4>
                        <p class="text-xs text-slate-600">Clientul poate interoga un endpoint pentru a vedea starea procesÄƒrii.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">FuncÈ›ionalitÄƒÈ›i Detaliate</h2>
            <div class="text-content">
                <p class="mb-8">
                    Sistemul nostru include o serie de funcÈ›ionalitÄƒÈ›i avansate pentru a asigura o procesare eficientÄƒ, sigurÄƒ È™i fiabilÄƒ a CV-urilor. Fiecare componentÄƒ a fost proiectatÄƒ cu atenÈ›ie la detalii pentru a oferi o experienÈ›Äƒ optimÄƒ. Click pe fiecare titlu pentru a expanda detaliile.
                </p>
            </div>
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 expand-button cursor-pointer" onclick="toggleDetails(this, 'feature-webhook')">Endpoint Webhook (`/webhook/cv`)</h3>
                    <div id="feature-webhook" class="schema-details ml-0 pl-0 border-l-0 text-content">
                        <p><strong class="font-medium">MetodÄƒ HTTP:</strong> POST</p>
                        <p><strong class="font-medium">Securizare:</strong> Validare prin header `X-Webhook-Secret`.</p>
                        <p><strong class="font-medium">Payload Intrare:</strong> CV (text/URL), `source_candidate_id`, `idempotency_key`, `metadata`.</p>
                        <p><strong class="font-medium">RÄƒspuns:</strong> HTTP 202 Accepted, `processing_id`, `status`, `status_url`.</p>
                        <p>Comportament: ValideazÄƒ, verificÄƒ idempotenÈ›a, iniÈ›iazÄƒ procesare asincronÄƒ.</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 expand-button cursor-pointer" onclick="toggleDetails(this, 'feature-url-processing')">Procesarea FiÈ™ierelor CV de la URL</h3>
                     <div id="feature-url-processing" class="schema-details ml-0 pl-0 border-l-0 text-content">
                        <p><strong class="font-medium">Biblioteci:</strong> `aiohttp`, `PyPDF2`, `python-docx`.</p>
                        <p>DescÄƒrcare asincronÄƒ, User-Agent generic, detecÈ›ie MIME.</p>
                        <p>Gestionare robustÄƒ a erorilor de reÈ›ea È™i parsare.</p>
                    </div>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 expand-button cursor-pointer" onclick="toggleDetails(this, 'feature-gemini')">Integrarea cu API-ul Gemini</h3>
                     <div id="feature-gemini" class="schema-details ml-0 pl-0 border-l-0 text-content">
                        <p><strong class="font-medium">SDK:</strong> `google-genai`.</p>
                        <p><strong class="font-medium">Model:</strong> `gemini-2.5-flash-preview-05-20`.</p>
                        <p><strong class="font-medium">ConfiguraÈ›ie:</strong> `response_mime_type: "application/json"`, `response_schema`, `temperature: 0.1`, `safety_settings: BLOCK_NONE`, `thinking_config: thinking_budget=0`.</p>
                        <p>Prompt Ã®n englezÄƒ, apel asincron, reÃ®ncercÄƒri automate.</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 expand-button cursor-pointer" onclick="toggleDetails(this, 'feature-firestore')">PersistenÈ›a Datelor Ã®n Firestore</h3>
                     <div id="feature-firestore" class="schema-details ml-0 pl-0 border-l-0 text-content">
                        <p><strong class="font-medium">SDK:</strong> `firebase-admin`.</p>
                        <p><strong class="font-medium">Structura ColecÈ›iei:</strong> `artifacts/{APP_ID}/users/cv_processing_service_user/processed_cvs`.</p>
                        <p>StocheazÄƒ: `processing_id`, payload, status, date extrase, erori, timestamps, etc.</p>
                    </div>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 expand-button cursor-pointer" onclick="toggleDetails(this, 'feature-status')">Endpoint de Status</h3>
                     <div id="feature-status" class="schema-details ml-0 pl-0 border-l-0 text-content">
                        <p><strong class="font-medium">MetodÄƒ HTTP:</strong> GET, `/status/cv/{processing_id}`.</p>
                        <p>ReturneazÄƒ starea curentÄƒ È™i rezultatele unei procesÄƒri.</p>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-sky-600 mb-2 expand-button cursor-pointer" onclick="toggleDetails(this, 'feature-idempotency')">Gestionarea IdempotenÈ›ei</h3>
                     <div id="feature-idempotency" class="schema-details ml-0 pl-0 border-l-0 text-content">
                        <p>Previne procesÄƒrile duplicate bazate pe `idempotency_key` sau `source_candidate_id`.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="schema" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">Schema de ExtracÈ›ie a Datelor (`CV_EXTRACTION_SCHEMA`)</h2>
            <div class="text-content">
                <p class="mb-8">
                    Aceasta este structura JSON detaliatÄƒ pe care modelul Gemini o utilizeazÄƒ pentru a extrage È™i organiza informaÈ›iile din CV-uri. PuteÈ›i da click pe fiecare cheie principalÄƒ pentru a vedea sub-proprietÄƒÈ›ile È™i descrierile acestora. CÃ¢mpurile marcate cu "(obligatoriu)" Ã®n descrierea schemei din codul sursÄƒ sunt esenÈ›iale pentru structura de bazÄƒ a datelor extrase.
                </p>
            </div>
            <div id="cvSchemaContainer" class="space-y-3">
                </div>
        </section>

        <section id="tech" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">Tehnologii Utilizate</h2>
            <div class="text-content">
                <p class="mb-8">
                    Sistemul se bazeazÄƒ pe un set de tehnologii moderne È™i performante pentru a asigura eficienÈ›Äƒ È™i fiabilitate.
                </p>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Python & FastAPI</h3>
                    <p class="text-sm text-slate-600">Pentru dezvoltarea rapidÄƒ È™i performantÄƒ a API-ului backend.</p>
                </div>
                <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Google Gemini 2.5 Flash</h3>
                    <p class="text-sm text-slate-600">Model AI de ultimÄƒ generaÈ›ie pentru extragerea inteligentÄƒ a datelor (via SDK `google-genai`).</p>
                </div>
                <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Google Cloud Firestore</h3>
                    <p class="text-sm text-slate-600">BazÄƒ de date NoSQL scalabilÄƒ pentru stocarea datelor.</p>
                </div>
                <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Google Cloud Run</h3>
                    <p class="text-sm text-slate-600">PlatformÄƒ serverless pentru implementare È™i scalare automatÄƒ.</p>
                </div>
                <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Docker</h3>
                    <p class="text-sm text-slate-600">Pentru containerizarea aplicaÈ›iei, asigurÃ¢nd portabilitate.</p>
                </div>
                <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">aiohttp, PyPDF2, python-docx</h3>
                    <p class="text-sm text-slate-600">Pentru procesarea asincronÄƒ a fiÈ™ierelor È™i extragerea textului.</p>
                </div>
                 <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Pydantic</h3>
                    <p class="text-sm text-slate-600">Pentru validarea datelor È™i definirea modelelor.</p>
                </div>
                 <div class="bg-slate-50 p-5 rounded-lg shadow hover:shadow-lg transition-shadow">
                    <h3 class="text-lg font-semibold text-sky-700 mb-1">Tenacity</h3>
                    <p class="text-sm text-slate-600">Pentru implementarea logicii de reÃ®ncercare robustÄƒ.</p>
                </div>
            </div>
        </section>

        <section id="setup" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">Ghid de Configurare a Sistemului (Setup)</h2>
            <div class="text-content">
                <p class="mb-8">
                    UrmaÈ›i aceÈ™ti paÈ™i pentru a configura È™i rula local sistemul de procesare a CV-urilor. Acest ghid presupune cÄƒ aveÈ›i deja cunoÈ™tinÈ›e de bazÄƒ despre Python, terminal È™i Google Cloud Platform.
                </p>
            </div>

            <div class="space-y-8">
                <div>
                    <h3 class="step-title"><span class="step-counter">1</span>CerinÈ›e Preliminare</h3>
                    <ul class="list-disc list-inside space-y-2 text-slate-700 ml-10">
                        <li>**Python 3.10+** instalat pe sistemul dumneavoastrÄƒ.</li>
                        <li>**Pip** (managerul de pachete Python) actualizat.</li>
                        <li>**(OpÈ›ional, dar recomandat pentru implementare) Docker** instalat.</li>
                        <li>Un **cont Google Cloud Platform (GCP)** activ, cu facturarea configuratÄƒ.</li>
                        <li>**(Recomandat) Google Cloud SDK (`gcloud` CLI)** instalat È™i configurat pe maÈ™ina localÄƒ.</li>
                    </ul>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">2</span>ObÈ›inerea Codului SursÄƒ</h3>
                    <p class="text-slate-700 ml-10">DescÄƒrcaÈ›i sau clonaÈ›i fiÈ™ierele proiectului (`main.py`, `requirements.txt`, `Dockerfile`, etc.) Ã®ntr-un director local.</p>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">3</span>Mediu Virtual È™i DependenÈ›e</h3>
                    <p class="text-slate-700 ml-10">Este recomandat sÄƒ folosiÈ›i un mediu virtual Python pentru a izola dependenÈ›ele proiectului.</p>
                    <h4 class="sub-step-title ml-10">3.1. CreaÈ›i È™i ActivaÈ›i Mediul Virtual:</h4>
                    <p class="text-slate-700 ml-10">NavigaÈ›i Ã®n directorul proiectului È™i rulaÈ›i:</p>
                    <div class="code-block ml-10">
                        <span class="block">python -m venv venv</span>
                        <span class="block"># Pe Windows:</span>
                        <span class="block">venv\Scripts\activate</span>
                        <span class="block"># Pe macOS/Linux:</span>
                        <span class="block">source venv/bin/activate</span>
                    </div>
                    <h4 class="sub-step-title ml-10">3.2. InstalaÈ›i DependenÈ›ele:</h4>
                    <p class="text-slate-700 ml-10">Cu mediul virtual activat, instalaÈ›i pachetele necesare:</p>
                    <div class="code-block ml-10">pip install -r requirements.txt</div>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">4</span>Configurarea Proiectului Google Cloud</h3>
                     <h4 class="sub-step-title ml-10">4.1. CreaÈ›i sau SelectaÈ›i un Proiect GCP:</h4>
                     <p class="text-slate-700 ml-10">AccesaÈ›i <a href="https://console.cloud.google.com/" target="_blank" class="text-sky-600 hover:underline">Google Cloud Console</a> È™i selectaÈ›i un proiect existent sau creaÈ›i unul nou. NotaÈ›i **ID-ul Proiectului (Project ID)**.</p>
                     <h4 class="sub-step-title ml-10">4.2. ActivaÈ›i API-urile Necesare:</h4>
                     <p class="text-slate-700 ml-10">Pentru proiectul selectat, asiguraÈ›i-vÄƒ cÄƒ urmÄƒtoarele API-uri sunt activate:</p>
                     <ul class="list-disc list-inside space-y-1 text-slate-700 ml-14">
                        <li>**Cloud Firestore API:** Pentru baza de date.</li>
                        <li>**Vertex AI API:** Pentru accesul la modelele Gemini.</li>
                     </ul>
                     <p class="text-slate-700 ml-10">PuteÈ›i activa API-urile din secÈ›iunea "APIs & Services" > "Library" a consolei GCP.</p>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">5</span>Configurarea Firestore</h3>
                    <p class="text-slate-700 ml-10">DacÄƒ nu aÈ›i fÄƒcut-o deja la activarea API-ului:</p>
                    <ul class="list-disc list-inside space-y-1 text-slate-700 ml-14">
                        <li>NavigaÈ›i la secÈ›iunea Firestore din consola GCP.</li>
                        <li>CreaÈ›i o bazÄƒ de date Ã®n **Mod Nativ (Native Mode)**.</li>
                        <li>AlegeÈ›i o **locaÈ›ie** pentru baza de date (ex: `europe-west1`).</li>
                    </ul>
                </div>
            
                <div>
                    <h3 class="step-title"><span class="step-counter">6</span>Cont de Serviciu È™i Cheie JSON (Dezvoltare LocalÄƒ)</h3>
                    <p class="text-slate-700 ml-10">Pentru ca aplicaÈ›ia sÄƒ se autentifice la GCP de pe maÈ™ina localÄƒ:</p>
                     <ul class="list-disc list-inside space-y-1 text-slate-700 ml-14">
                        <li>Ãn consola GCP, "IAM & Admin" > "Service Accounts", creaÈ›i un cont (ex: `cv-processor-dev-sa`).</li>
                        <li>AcordaÈ›i rolurile: `Cloud Datastore User` È™i `Vertex AI User`.</li>
                        <li>GeneraÈ›i o cheie JSON pentru acest cont È™i descÄƒrcaÈ›i-o.</li>
                    </ul>
                    <p class="text-slate-700 ml-10">**AlternativÄƒ (ADC):** RulaÈ›i `gcloud auth application-default login`.</p>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">7</span>Cheia API Gemini</h3>
                    <p class="text-slate-700 ml-10">ObÈ›ineÈ›i o cheie API din <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-sky-600 hover:underline">Google AI Studio</a> pentru proiectul GCP.</p>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">8</span>Configurarea Variabilelor de Mediu (`.env`)</h3>
                    <p class="text-slate-700 ml-10">CreaÈ›i fiÈ™ierul `.env` Ã®n rÄƒdÄƒcina proiectului:</p>
                    <div class="code-block ml-10">
                        <span class="block">GEMINI_API_KEY="CHEIA_DVS_API_GEMINI_AICI"</span>
                        <span class="block">WEBHOOK_SECRET="UN_SECRET_PUTERNIC_PENTRU_WEBHOOK"</span>
                        <span class="block">GCP_PROJECT_ID="ID_UL_PROIECTULUI_DVS_GCP"</span>
                        <span class="block"># GOOGLE_APPLICATION_CREDENTIALS="/calea/catre/fisierul_serviciu_cont.json" # (dacÄƒ nu folosiÈ›i ADC)</span>
                    </div>
                </div>
            
                <div>
                    <h3 class="step-title"><span class="step-counter">9</span>Pornirea LocalÄƒ a Serverului</h3>
                    <p class="text-slate-700 ml-10">PorniÈ›i serverul FastAPI:</p>
                    <div class="code-block ml-10">python main.py</div>
                    <p class="text-slate-700 ml-10">Serverul va rula pe `http://localhost:8000`.</p>
                </div>
            </div>
        </section>

        <section id="usage" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">Ghid de Utilizare a API-ului</h2>
            <div class="text-content">
                <p class="mb-8">
                    OdatÄƒ ce sistemul backend este configurat È™i ruleazÄƒ, puteÈ›i interacÈ›iona cu el prin API-ul expus. Acest ghid vÄƒ aratÄƒ cum sÄƒ trimiteÈ›i CV-uri pentru procesare È™i cum sÄƒ verificaÈ›i statusul.
                </p>
            </div>
            <div class="space-y-8">
                <div>
                    <h3 class="step-title"><span class="step-counter">1</span>Endpoint Webhook: Procesare CV (`POST /webhook/cv`)</h3>
                    <div class="text-content ml-10">
                        <p>Acesta este endpoint-ul principal pentru a iniÈ›ia procesarea unui CV. Sistemul acceptÄƒ CV-ul fie ca text direct, fie ca un URL cÄƒtre un fiÈ™ier (PDF, DOCX).</p>
                    </div>
                    <h4 class="sub-step-title ml-10">Securitate:</h4>
                    <p class="text-slate-700 ml-14">Toate cererile cÄƒtre acest endpoint trebuie sÄƒ includÄƒ header-ul HTTP `X-Webhook-Secret`. Valoarea acestui header trebuie sÄƒ corespundÄƒ cu cea setatÄƒ Ã®n variabila de mediu `WEBHOOK_SECRET` a serverului.</p>

                    <h4 class="sub-step-title ml-10">Payload-ul Cererii (Request Body - JSON):</h4>
                    <p class="text-slate-700 ml-14">Corpul cererii trebuie sÄƒ fie un obiect JSON. IatÄƒ cÃ¢mpurile acceptate:</p>
                    <ul class="list-disc list-inside space-y-1 text-slate-700 ml-18 mb-4">
                        <li>`cv_text` (OpÈ›ional, string): Textul integral al CV-ului.</li>
                        <li>`cv_file_payload` (OpÈ›ional, obiect): Folosit dacÄƒ CV-ul este trimis ca URL.
                            <ul class="list-circle list-inside ml-6">
                                <li>`cv_url` (Obligatoriu dacÄƒ `cv_file_payload` este prezent, string): URL-ul valid cÄƒtre fiÈ™ierul CV.</li>
                                <li>`file_mime_type` (OpÈ›ional, string): Tipul MIME al fiÈ™ierului din URL (ex: "application/pdf", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"). AjutÄƒ la procesarea corectÄƒ.</li>
                            </ul>
                        </li>
                        <li>`source_candidate_id` (OpÈ›ional, string): Un ID unic al candidatului din sistemul sursÄƒ (ex: **`candidate_slug` din Recruit CRM**). EsenÈ›ial pentru a lega datele procesate Ã®napoi la candidatul corect Ã®n sistemul extern È™i pentru idempotenÈ›Äƒ.</li>
                        <li>`idempotency_key` (OpÈ›ional, string): O cheie unicÄƒ furnizatÄƒ de client pentru a preveni procesÄƒrile duplicate. DacÄƒ este prezentÄƒ, are prioritate faÈ›Äƒ de `source_candidate_id` pentru verificarea idempotenÈ›ei.</li>
                        <li>`metadata` (OpÈ›ional, obiect): Un dicÈ›ionar pentru a trimite orice metadate suplimentare relevante (ex: `{"job_id": "XYZ123", "source_platform": "RecruitCRM"}`).</li>
                    </ul>
                    <div class="info-note ml-14">
                        <p class="font-semibold">Important:</p>
                        <p class="text-sm">Trebuie furnizat fie cÃ¢mpul `cv_text`, fie obiectul `cv_file_payload` cu un `cv_url` valid.</p>
                    </div>


                    <h4 class="sub-step-title ml-10">Exemple de Cereri `curl`:</h4>
                    <p class="text-slate-700 font-semibold ml-14">a) Trimitere CV ca text (exemplu specific pentru Recruit CRM):</p>
                    <div class="code-block ml-14">
# ÃnlocuiÈ›i YOUR_WEBHOOK_SECRET È™i valorile specifice
curl -X POST "http://localhost:8000/webhook/cv" \
-H "Content-Type: application/json" \
-H "X-Webhook-Secret: YOUR_WEBHOOK_SECRET" \
-d '{
  "cv_text": "Nume: Elena Popescu\nEmail: elena.popescu@exemplu.com\nExperienta: ...",
  "source_candidate_id": "recruitcrm-candidate-slug-123xyz",
  "idempotency_key": "webhook-recruitcrm-elena-popescu-001",
  "metadata": {"recruitment_source": "RecruitCRM Event"}
}'
                    </div>
                    <p class="text-slate-700 font-semibold mt-2 ml-14">b) Trimitere CV ca URL (exemplu specific pentru Recruit CRM):</p>
                    <div class="code-block ml-14">
# ÃnlocuiÈ›i YOUR_WEBHOOK_SECRET È™i valorile specifice
curl -X POST "http://localhost:8000/webhook/cv" \
-H "Content-Type: application/json" \
-H "X-Webhook-Secret: YOUR_WEBHOOK_SECRET" \
-d '{
  "cv_file_payload": {
    "cv_url": "https://url-public-catre-cv-din-recruitcrm.com/cv.pdf",
    "file_mime_type": "application/pdf"
  },
  "source_candidate_id": "recruitcrm-candidate-slug-456abc",
  "metadata": {"job_application_id": "789"}
}'
                    </div>

                    <h4 class="sub-step-title ml-10">RÄƒspuns AÈ™teptat (HTTP 202 Accepted):</h4>
                    <div class="code-block ml-14">
{
  "message": "CV primit È™i procesarea a fost iniÈ›iatÄƒ Ã®n fundal.",
  "processing_id": "uuid-generat-automat-pentru-procesare",
  "status": "pending",
  "status_url": "http://localhost:8000/status/cv/uuid-generat-automat-pentru-procesare"
}
                    </div>
                     <p class="text-slate-700 mt-2 ml-14">DacÄƒ se detecteazÄƒ o cerere duplicat (pe baza `idempotency_key` sau `source_candidate_id`), rÄƒspunsul va fi diferit, indicÃ¢nd acest lucru (ex: status `already_received_or_processing`).</p>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">2</span>Endpoint de Verificare a Statusului (`GET /status/cv/{processing_id}`)</h3>
                     <div class="text-content ml-10">
                        <p>FolosiÈ›i `processing_id`-ul obÈ›inut Ã®n rÄƒspunsul de la webhook pentru a interoga periodic starea È™i rezultatele procesÄƒrii CV-ului.</p>
                    </div>
                    <h4 class="sub-step-title ml-10">Exemplu `curl`:</h4>
                    <div class="code-block ml-14">
# ÃnlocuiÈ›i ID_PROCESARE_PRIMIT cu ID-ul real
curl -X GET "http://localhost:8000/status/cv/ID_PROCESARE_PRIMIT"
                    </div>
                    <h4 class="sub-step-title ml-10">RÄƒspuns AÈ™teptat (HTTP 200 OK):</h4>
                    <p class="text-slate-700 ml-14">Structura rÄƒspunsului variazÄƒ Ã®n funcÈ›ie de starea procesÄƒrii:</p>
                    <p class="text-slate-700 font-semibold mt-2 ml-14">a) Procesare finalizatÄƒ cu succes:</p>
                    <div class="code-block ml-14">
{
  "processing_id": "ID_PROCESARE_PRIMIT",
  "status": "completed",
  "received_at_utc": "2024-05-21T10:00:00Z",
  "updated_at_utc": "2024-05-21T10:00:35Z",
  "extracted_data": { /* Datele complete extrase conform CV_EXTRACTION_SCHEMA */ },
  "error_message": null,
  "processing_time_seconds": 35.0
}
                    </div>
                    <p class="text-slate-700 font-semibold mt-2 ml-14">b) Procesare Ã®n curs (exemplu):</p>
                    <div class="code-block ml-14">
{
  "processing_id": "ID_PROCESARE_PRIMIT",
  "status": "pending_processing", 
  "received_at_utc": "2024-05-21T10:05:00Z",
  "updated_at_utc": "2024-05-21T10:05:10Z",
  "extracted_data": null,
  "error_message": null,
  "processing_time_seconds": null
}
                    </div>
                     <p class="text-slate-700 font-semibold mt-2 ml-14">c) Eroare Ã®n timpul procesÄƒrii:</p>
                    <div class="code-block ml-14">
{
  "processing_id": "ID_PROCESARE_PRIMIT",
  "status": "error",
  "received_at_utc": "2024-05-21T10:10:00Z",
  "updated_at_utc": "2024-05-21T10:10:05Z",
  "extracted_data": null,
  "error_message": "Descrierea detaliatÄƒ a erorii Ã®ntÃ¢mpinate.",
  "processing_time_seconds": 5.0
}
                    </div>
                    <p class="text-slate-700 ml-14">DacÄƒ `processing_id` nu este gÄƒsit, se va returna un rÄƒspuns HTTP 404 Not Found.</p>
                </div>
            </div>
        </section>

        <section id="recruitcrm" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">Ghid de Integrare cu Recruit CRM</h2>
            <div class="text-content">
            <p class="mb-8">
                AceastÄƒ secÈ›iune descrie paÈ™ii È™i consideraÈ›iile pentru integrarea sistemului nostru de procesare a CV-urilor cu platforma Recruit CRM. Scopul este de a automatiza fluxul: primirea unui candidat Ã®n Recruit CRM, trimiterea CV-ului cÄƒtre serviciul nostru pentru analizÄƒ, È™i actualizarea profilului candidatului Ã®n Recruit CRM cu datele structurate extrase.
            </p>
            </div>
            <div class="note">
                <p class="font-semibold">NotÄƒ ImportantÄƒ:</p>
                <p class="text-sm">Detaliile specifice de configurare (nume de cÃ¢mpuri, capabilitÄƒÈ›i API, interfaÈ›a exactÄƒ a webhook-urilor) din Recruit CRM pot varia. ConsultaÈ›i Ã®ntotdeauna documentaÈ›ia oficialÄƒ Recruit CRM pentru informaÈ›ii precise È™i actualizate privind API-ul È™i funcÈ›ionalitÄƒÈ›ile de webhook.</p>
            </div>

            <div class="space-y-8">
                <div>
                    <h3 class="step-title"><span class="step-counter">1</span>Trimiterea CV-urilor din Recruit CRM cÄƒtre Procesatorul Inteligent</h3>
                    <p class="text-slate-700 ml-10">Obiectiv: CÃ¢nd un nou candidat este adÄƒugat sau un CV este actualizat Ã®n Recruit CRM, informaÈ›iile sunt trimise automat cÄƒtre endpoint-ul nostru `/webhook/cv`.</p>
                    
                    <h4 class="sub-step-title ml-10">Metoda RecomandatÄƒ: Webhooks Ã®n Recruit CRM</h4>
                    <ul class="list-disc list-inside space-y-2 text-slate-700 ml-14">
                        <li>**VerificaÈ›i CapabilitÄƒÈ›ile Webhook:** ConfirmaÈ›i Ã®n documentaÈ›ia Recruit CRM dacÄƒ se pot configura webhooks pentru evenimente ca "Candidat Nou Creat" sau "CV AdÄƒugat/Actualizat".</li>
                        <li>**Configurarea Webhook-ului Ã®n Recruit CRM:**
                            <ul class="list-circle list-inside ml-6">
                                <li>**URL Endpoint:** Adresa publicÄƒ a serviciului nostru FastAPI (ex: `https://[URL-UL-DVS-CLOUD-RUN]/webhook/cv`).</li>
                                <li>**MetodÄƒ HTTP:** `POST`.</li>
                                <li>**Format Payload:** Ideal, JSON customizabil. DacÄƒ Recruit CRM trimite un format fix, s-ar putea sÄƒ fie nevoie de un strat intermediar (ex: o funcÈ›ie Cloud Function simplÄƒ sau un serviciu ca Zapier/Make) pentru a transforma payload-ul Ã®nainte de a-l trimite API-ului nostru.</li>
                                <li>**Header Securitate:** ConfiguraÈ›i Recruit CRM sÄƒ trimitÄƒ un header `X-Webhook-Secret` cu valoarea din `.env`.</li>
                            </ul>
                        </li>
                        <li>**Date EsenÈ›iale de Trimis Ã®n Payload cÄƒtre API-ul nostru:**
                            <ul class="list-circle list-inside ml-6">
                                <li>**`source_candidate_id`**: Trebuie sÄƒ conÈ›inÄƒ **`candidate_slug`**-ul unic al candidatului din Recruit CRM. Acesta este crucial pentru a identifica È™i actualiza corect candidatul ulterior.</li>
                                <li>**`cv_text` SAU `cv_file_payload.cv_url`**:
                                    <ul class="list-disc list-inside ml-6">
                                        <li>DacÄƒ Recruit CRM poate furniza textul CV-ului direct, trimiteÈ›i-l Ã®n `cv_text`.</li>
                                        <li>DacÄƒ Recruit CRM oferÄƒ un URL public È™i stabil cÄƒtre fiÈ™ierul CV (PDF, DOCX), trimiteÈ›i-l Ã®n `cv_file_payload.cv_url`. FurnizaÈ›i `cv_file_payload.file_mime_type` dacÄƒ este cunoscut.</li>
                                    </ul>
                                </li>
                                <li>**`metadata` (OpÈ›ional):** Orice alte ID-uri sau informaÈ›ii relevante din Recruit CRM (ex: ID-ul job-ului asociat, sursa candidatului).</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">2</span>Procesarea de cÄƒtre Sistemul Nostru</h3>
                    <p class="text-slate-700 ml-10">Sistemul nostru primeÈ™te webhook-ul, valideazÄƒ cererea, gestioneazÄƒ idempotenÈ›a (folosind `source_candidate_id` dacÄƒ `idempotency_key` nu e dat), descarcÄƒ È™i parseazÄƒ CV-ul (dacÄƒ e URL), extrage datele cu Gemini È™i le salveazÄƒ Ã®n Firestore. `processing_id`-ul generat este unic pentru aceastÄƒ operaÈ›iune.</p>
                </div>

                <div>
                    <h3 class="step-title"><span class="step-counter">3</span>Actualizarea Candidatului Ã®n Recruit CRM (Backend-to-Backend)</h3>
                    <p class="text-slate-700 ml-10">DupÄƒ ce datele sunt extrase (`status: "completed"` Ã®n Firestore), sistemul nostru backend (sau un serviciu adiacent) va iniÈ›ia un apel API cÄƒtre Recruit CRM pentru a actualiza profilul candidatului.</p>

                    <h4 class="sub-step-title ml-10">Utilizarea API-ului Recruit CRM: `POST /v1/candidates/{candidate_slug}`</h4>
                     <ul class="list-disc list-inside space-y-2 text-slate-700 ml-14">
                        <li>**Identificator:** Se foloseÈ™te `candidate_slug` (stocat la noi ca `source_candidate_id`) Ã®n URL-ul endpoint-ului.</li>
                        <li>**Autentificare:** Cererile necesitÄƒ un token Bearer (API Token Recruit CRM) Ã®n header-ul `Authorization`. Tokenul trebuie stocat securizat (ex: Google Secret Manager).</li>
                        <li>**Format Request Body:** `multipart/form-data`.</li>
                        <li>**Rate Limiting:** API-ul Recruit CRM are limite de ratÄƒ (ex: 60 cereri/minut). Sistemul backend trebuie sÄƒ gestioneze aceste limite, posibil printr-o coadÄƒ de actualizÄƒri È™i reÃ®ncercÄƒri cu backoff, monitorizÃ¢nd header-ele `X-RateLimit-Limit` È™i `X-RateLimit-Remaining`.</li>
                    </ul>

                    <h4 class="sub-step-title ml-10">Descoperirea È™i Maparea CÃ¢mpurilor Custom:</h4>
                    <p class="text-slate-700 ml-14">Pentru o mapare flexibilÄƒ È™i corectÄƒ, folosiÈ›i endpoint-ul Recruit CRM `GET /v1/custom-fields/candidates` pentru a obÈ›ine lista cÃ¢mpurilor custom definite Ã®n contul dvs., Ã®mpreunÄƒ cu `field_id`, `field_name` È™i `field_type`.</p>
                    <div class="info-note ml-14">
                        <p class="font-semibold">Strategie de Mapare DinamicÄƒ:</p>
                        <p class="text-sm">1. La pornirea serviciului nostru (sau periodic), apelaÈ›i `GET /v1/custom-fields/candidates` È™i stocaÈ›i (ex: Ã®n memorie cache sau Ã®ntr-o configuraÈ›ie) o mapare Ã®ntre numele logice ale cÃ¢mpurilor pe care doriÈ›i sÄƒ le populaÈ›i (ex: "Sumar AI CV", "CompetenÈ›e Tehnice AI") È™i `field_id`-urile returnate de API-ul Recruit CRM pentru `field_name`-urile corespunzÄƒtoare.</p>
                        <p class="text-sm">2. CÃ¢nd actualizaÈ›i un candidat, folosiÈ›i aceastÄƒ mapare pentru a construi corect secÈ›iunea `custom_fields` din payload-ul `multipart/form-data`.</p>
                    </div>

                    <h4 class="sub-step-title ml-10">Construirea Payload-ului `multipart/form-data` pentru Actualizare:</h4>
                    <p class="text-slate-700 ml-14">Va trebui sÄƒ construiÈ›i corpul cererii `multipart/form-data` cu datele extrase de Gemini, mapate la cÃ¢mpurile standard È™i custom din Recruit CRM.</p>
                    <ul class="list-disc list-inside space-y-1 text-slate-700 ml-18">
                        <li>**CÃ¢mpuri Standard:** PopulaÈ›i cÃ¢mpurile standard direct (ex: `email`, `linkedin`, `candidate_summary` cu `overall_assessment_by_llm.key_strengths_summary`, `skill` cu un string concatenat din `skills.technical_skills`).</li>
                        <li>**`custom_fields`:** Pentru fiecare cÃ¢mp custom pe care doriÈ›i sÄƒ-l actualizaÈ›i, veÈ›i include o pereche `field_id` (din maparea dinamicÄƒ) È™i `value`.</li>
                    </ul>
                     <div class="warning-note ml-14">
                        <p class="font-semibold">Formatul `custom_fields` Ã®n `multipart/form-data`:</p>
                        <p class="text-sm">DocumentaÈ›ia Recruit CRM pentru endpoint-ul `POST /v1/candidates/{candidate_slug}` aratÄƒ un "Request Sample" cu un payload `multipart/form-data` brut. Este **crucial** sÄƒ determinaÈ›i din documentaÈ›ia lor sau prin testare cum trebuie structurat un array de obiecte (cum este `custom_fields` Ã®n rÄƒspunsul JSON) pentru a fi trimis corect Ã®ntr-o cerere `multipart/form-data`. OpÈ›iuni comune sunt trimiterea ca string JSON sau indexarea fiecÄƒrui element (ex: `custom_fields[0][field_id]`, `custom_fields[0][value]`).</p>
                    </div>

                    <h4 class="sub-step-title ml-10">Implementarea Logicii de Actualizare:</h4>
                     <ul class="list-disc list-inside space-y-1 text-slate-700 ml-14">
                        <li>**Ãn `background_cv_processing_task`:** AdÄƒugaÈ›i logica de apelare a API-ului Recruit CRM dupÄƒ ce datele Gemini sunt extrase cu succes. FolosiÈ›i `aiohttp` pentru apeluri asincrone sau rulaÈ›i `requests` Ã®ntr-un executor de thread-uri.</li>
                        <li>**Serviciu Separat (Recomandat pentru robusteÈ›e):** O funcÈ›ie Cloud Function (sau un alt microserviciu) declanÈ™atÄƒ de scrierea Ã®n Firestore (cÃ¢nd `status` devine `completed`). Aceasta decupleazÄƒ responsabilitÄƒÈ›ile È™i permite o gestionare mai bunÄƒ a reÃ®ncercÄƒrilor È™i a limitelor de ratÄƒ specifice API-ului Recruit CRM.</li>
                     </ul>
                </div>
            </div>
        </section>

        <section id="considerations" class="content-section bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="section-title">ConsideraÈ›ii Tehnice Suplimentare</h2>
            <div class="text-content">
                <p class="mb-8">
                    Pentru o implementare robustÄƒ Ã®n producÈ›ie, sunt luate Ã®n considerare urmÄƒtoarele aspecte:
                </p>
            </div>
             <div class="space-y-6">
                <div>
                    <h4 class="text-lg font-semibold text-sky-600">Securitate</h4>
                    <ul class="list-disc list-inside text-slate-700 ml-4 space-y-1">
                        <li>Utilizarea variabilelor de mediu È™i a Google Secret Manager pentru stocarea securizatÄƒ a cheilor API È™i a altor secrete.</li>
                        <li>Validarea riguroasÄƒ a tuturor input-urilor pentru a preveni vulnerabilitÄƒÈ›i (ex: injection).</li>
                        <li>Implementarea de rate limiting pe endpoint-urile publice, dacÄƒ este necesar.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold text-sky-600">Scalabilitate</h4>
                    <ul class="list-disc list-inside text-slate-700 ml-4 space-y-1">
                        <li>Arhitectura serverless a Google Cloud Run permite scalarea automatÄƒ a instanÈ›elor Ã®n funcÈ›ie de volumul de trafic.</li>
                        <li>Procesarea asincronÄƒ a task-urilor de lungÄƒ duratÄƒ (cum ar fi extragerea de date) previne blocarea cererilor.</li>
                        <li>Pentru volume extrem de mari, se poate considera decuplarea cu Google Cloud Tasks pentru o mai mare robusteÈ›e a cozilor de mesaje.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold text-sky-600">RobusteÈ›e È™i Fiabilitate</h4>
                    <ul class="list-disc list-inside text-slate-700 ml-4 space-y-1">
                        <li>Mecanisme de reÃ®ncercare cu backoff exponenÈ›ial (folosind `tenacity`) pentru apelurile cÄƒtre API-uri externe (Gemini, Recruit CRM).</li>
                        <li>Gestionarea explicitÄƒ È™i detaliatÄƒ a excepÈ›iilor Ã®n toate etapele procesÄƒrii.</li>
                        <li>IdempotenÈ›a endpoint-ului webhook pentru a preveni procesÄƒrile duplicate.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold text-sky-600">Logging È™i Monitorizare</h4>
                    <ul class="list-disc list-inside text-slate-700 ml-4 space-y-1">
                        <li>Logging structurat È™i detaliat pentru a facilita diagnosticarea problemelor È™i monitorizarea fluxului de date.</li>
                        <li>Integrarea cu Google Cloud Logging È™i Cloud Monitoring pentru vizualizarea logurilor, crearea de metrici È™i configurarea alertelor pentru erori critice sau probleme de performanÈ›Äƒ.</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-300 text-center p-6 mt-12">
        <p>&copy; <span id="currentYear"></span> Sistem de Procesare a CV-urilor. Toate drepturile rezervate.</p>
    </footer>

    <script>
        const CV_EXTRACTION_SCHEMA = {
            "personal_info": {
                "type": "object",
                "description": "InformaÈ›ii de contact È™i identificare ale candidatului.",
                "properties": {
                    "full_name": {"type": "string", "description": "Numele complet al candidatului, aÈ™a cum apare Ã®n CV."},
                    "email": {"type": "string", "description": "Adresa de email principalÄƒ, validatÄƒ dacÄƒ posibil."},
                    "phone_number": {"type": "string", "description": "NumÄƒrul de telefon principal, format internaÈ›ional preferat dacÄƒ e clar."},
                    "linkedin_url": {"type": "string", "description": "URL cÄƒtre profilul LinkedIn, dacÄƒ este menÈ›ionat explicit."},
                    "github_url": {"type": "string", "description": "URL cÄƒtre profilul GitHub, dacÄƒ este menÈ›ionat."},
                    "portfolio_url": {"type": "string", "description": "URL cÄƒtre portofoliul personal, dacÄƒ este menÈ›ionat."},
                    "location": {"type": "string", "description": "OraÈ™ul È™i/sau È›ara de rezidenÈ›Äƒ, dacÄƒ sunt menÈ›ionate."}
                },
                "required": ["full_name"]
            },
            "summary_objective": {
                "type": "string",
                "description": "Sumarul profesional concis, obiectivul de carierÄƒ sau secÈ›iunea 'Despre mine' din CV."
            },
            "work_experience": {
                "type": "array",
                "description": "Lista experienÈ›elor profesionale anterioare.",
                "items": {
                    "type": "object",
                    "properties": {
                        "job_title": {"type": "string", "description": "Titlul exact al postului."},
                        "company_name": {"type": "string", "description": "Numele companiei angajatoare."},
                        "company_location": {"type": "string", "description": "LocaÈ›ia companiei (oraÈ™, È›arÄƒ), dacÄƒ este specificatÄƒ."},
                        "start_date": {"type": "string", "description": "Data de Ã®nceput a angajÄƒrii (ex: 'YYYY-MM', 'Luna Anul')."},
                        "end_date": {"type": "string", "description": "Data de sfÃ¢rÈ™it (ex: 'YYYY-MM', 'Luna Anul', 'Prezent')."},
                        "duration_months": {"type": "integer", "description": "Durata angajÄƒrii Ã®n luni, dacÄƒ poate fi calculatÄƒ."},
                        "responsibilities_achievements": {
                            "type": "array",
                            "items": {"type": "string"},
                            "description": "ListÄƒ detaliatÄƒ a responsabilitÄƒÈ›ilor, proiectelor È™i realizÄƒrilor cheie."
                        },
                        "technologies_used": {
                            "type": "array",
                            "items": {"type": "string"},
                            "description": "Tehnologii, unelte sau limbaje de programare specifice utilizate Ã®n acest rol."
                        }
                    },
                    "required": ["job_title", "company_name", "start_date"]
                }
            },
            "education": {
                "type": "array",
                "description": "Detalii despre parcursul educaÈ›ional.",
                "items": {
                    "type": "object",
                    "properties": {
                        "degree_name": {"type": "string", "description": "Numele diplomei sau calificÄƒrii obÈ›inute (ex: LicenÈ›Äƒ, Master, Doctorat)."},
                        "major_field_of_study": {"type": "string", "description": "Specializarea sau domeniul principal de studiu."},
                        "institution_name": {"type": "string", "description": "Numele instituÈ›iei de Ã®nvÄƒÈ›ÄƒmÃ¢nt."},
                        "institution_location": {"type": "string", "description": "LocaÈ›ia instituÈ›iei (oraÈ™, È›arÄƒ), dacÄƒ este specificatÄƒ."},
                        "graduation_date": {"type": "string", "description": "Data absolvirii sau data estimatÄƒ a absolvirii (ex: 'YYYY-MM', 'Anul')."},
                        "relevant_courses_thesis": {"type": "string", "description": "Cursuri relevante, proiecte academice sau titlul tezei, dacÄƒ sunt menÈ›ionate."}
                    },
                    "required": ["institution_name", "degree_name"]
                }
            },
            "skills": {
                "type": "object",
                "description": "Setul de competenÈ›e ale candidatului.",
                "properties": {
                    "technical_skills": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "ListÄƒ de competenÈ›e tehnice (ex: limbaje de programare, framework-uri, baze de date, unelte)."
                    },
                    "soft_skills": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "ListÄƒ de competenÈ›e interpersonale (ex: comunicare, leadership, lucru Ã®n echipÄƒ)."
                    },
                    "languages": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "language_name": {"type": "string"},
                                "proficiency_level": {"type": "string", "description": "Nivel de cunoaÈ™tere (ex: Nativ, Avansat, Mediu, ÃncepÄƒtor)."}
                            },
                             "required": ["language_name", "proficiency_level"]
                        },
                        "description": "Limbi strÄƒine cunoscute È™i nivelul de competenÈ›Äƒ."
                    }
                }
            },
            "certifications_awards": {
                "type": "array",
                "description": "CertificÄƒri, cursuri sau premii obÈ›inute.",
                "items": {
                    "type": "object",
                    "properties": {
                        "name": {"type": "string", "description": "Numele certificÄƒrii, cursului sau premiului."},
                        "issuing_organization": {"type": "string", "description": "OrganizaÈ›ia emitentÄƒ."},
                        "date_obtained": {"type": "string", "description": "Data obÈ›inerii (ex: 'YYYY-MM')."}
                    },
                    "required": ["name"]
                }
            },
            "projects": {
                "type": "array",
                "description": "Proiecte relevante la care a lucrat candidatul.",
                "items": {
                    "type": "object",
                    "properties": {
                        "project_name": {"type": "string"},
                        "description": {"type": "string"},
                        "technologies_used": {"type": "array", "items": {"type": "string"}},
                        "project_url": {"type": "string", "description": "URL cÄƒtre proiect, dacÄƒ este disponibil."}
                    },
                    "required": ["project_name", "description"]
                }
            },
            "overall_assessment_by_llm": {
                "type": "object",
                "description": "Evaluare sumarÄƒ generatÄƒ de modelul lingvistic mare (LLM).",
                "properties": {
                    "estimated_total_experience_years": {"type": "number", "description": "NumÄƒrul total estimat de ani de experienÈ›Äƒ profesionalÄƒ relevantÄƒ, bazat pe datele din CV."},
                    "primary_roles_suitability": {
                        "type": "array",
                        "items": {"type": "string"},
                        "description": "SugereazÄƒ 2-3 roluri principale pentru care acest candidat ar putea fi cel mai potrivit, pe baza Ã®ntregului CV."
                    },
                    "key_strengths_summary": {"type": "string", "description": "Un scurt sumar (2-3 fraze) al principalelor puncte forte ale candidatului."}
                }
            }
        };

        const tabs = document.querySelectorAll('.tab-button');
        const contentSections = document.querySelectorAll('.content-section');
        
        function showTab(tabId, event) { // Added event parameter
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('tab-active');
                } else {
                    tab.classList.remove('tab-active');
                }
            });
            contentSections.forEach(section => {
                if (section.id === tabId) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
            if (event && event.type === 'click') { // Only scroll on direct click
                 window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        const schemaContainer = document.getElementById('cvSchemaContainer');

        function renderSchema(schemaData, container, level = 0) {
            if (!schemaData || typeof schemaData !== 'object') {
                return;
            }

            for (const key in schemaData) {
                if (schemaData.hasOwnProperty(key)) {
                    const item = schemaData[key];
                    const div = document.createElement('div');
                    div.className = `mb-3 p-3 rounded-md ${level === 0 ? 'bg-slate-50 shadow-sm' : 'bg-slate-100 ml-4'}`;
                    
                    const header = document.createElement('div');
                    header.className = 'flex justify-between items-start gap-x-4';

                    const titleContainer = document.createElement('div');
                    titleContainer.className = 'flex-grow min-w-0'; 
                    const title = document.createElement('h4');
                    title.className = `text-md font-semibold ${level === 0 ? 'text-sky-700' : 'text-sky-600'} schema-key`;
                    let titleText = key;
                    if (typeof item === 'object' && item !== null && (item.type === 'object' || item.type === 'array')) {
                        titleText += ' â–¼';
                    }
                    title.textContent = titleText;
                    titleContainer.appendChild(title);
                     header.appendChild(titleContainer);

                    if (item && item.description) {
                        const descriptionP = document.createElement('p');
                        descriptionP.className = 'text-xs text-slate-500 mt-0.5 italic text-right flex-shrink-0 max-w-[60%] sm:max-w-[50%] break-words';
                        descriptionP.textContent = item.description;
                        header.appendChild(descriptionP); 
                    }
                    
                    div.appendChild(header);

                    const detailsDiv = document.createElement('div');
                    detailsDiv.className = 'schema-details mt-2 text-sm space-y-1'; 
                    
                    if (item && item.type) {
                         const typeP = document.createElement('p');
                         typeP.innerHTML = `<strong class="text-slate-700 font-medium">Tip:</strong> <span class="bg-sky-100 text-sky-800 px-2 py-0.5 rounded-full text-xs font-medium">${item.type}</span>`;
                         detailsDiv.appendChild(typeP);
                    }
                    if (item && item.required && Array.isArray(item.required) && item.required.length > 0) {
                        const requiredP = document.createElement('p');
                        requiredP.innerHTML = `<strong class="text-slate-700 font-medium">CÃ¢mpuri Obligatorii (Ã®n obiect):</strong> <span class="text-slate-600">${item.required.join(', ')}</span>`;
                        detailsDiv.appendChild(requiredP);
                    }


                    if (item && item.type === 'object' && item.properties) {
                        renderSchema(item.properties, detailsDiv, level + 1);
                    } else if (item && item.type === 'array' && item.items) {
                        const itemsHeader = document.createElement('p');
                        itemsHeader.innerHTML = `<strong class="text-slate-700 font-medium">Structura Elementelor Array:</strong>`;
                        detailsDiv.appendChild(itemsHeader);
                        if (item.items.type === 'object' && item.items.properties) {
                            renderSchema(item.items.properties, detailsDiv, level + 1);
                        } else if (item.items.type) {
                             const itemTypeP = document.createElement('p');
                             itemTypeP.innerHTML = `<strong class="text-slate-700 font-medium">Tip element:</strong> <span class="bg-sky-100 text-sky-800 px-2 py-0.5 rounded-full text-xs font-medium">${item.items.type}</span>`;
                             if (item.items.description) {
                                itemTypeP.innerHTML += `<span class="italic text-xs text-slate-500 ml-2">(${item.items.description})</span>`;
                             }
                             detailsDiv.appendChild(itemTypeP);
                        }
                    }
                    
                    div.appendChild(detailsDiv);
                    container.appendChild(div);

                    if (item && typeof item === 'object' && (item.type === 'object' || item.type === 'array')) {
                        title.addEventListener('click', (e) => {
                            e.stopPropagation(); 
                            detailsDiv.classList.toggle('open');
                            title.textContent = `${key} ${detailsDiv.classList.contains('open') ? ' â–²' : ' â–¼'}`;
                        });
                         if (level === 0) { 
                            detailsDiv.classList.add('open');
                            title.textContent = `${key} â–²`;
                         } else {
                             title.textContent = `${key} â–¼`; 
                         }
                    }
                }
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash.substring(1);
            const initialTab = hash || 'overview';
            showTab(initialTab, null); // Pass null for event on initial load

            tabs.forEach(tab => {
                if (tab.dataset.tab === initialTab) {
                    tab.classList.add('tab-active');
                }
                 tab.addEventListener('click', (event) => { 
                    const tabId = tab.dataset.tab;
                    showTab(tabId, event); 
                    history.pushState(null, null, `#${tabId}`);
                });
            });

            if (schemaContainer) {
                renderSchema(CV_EXTRACTION_SCHEMA, schemaContainer);
            }

            window.addEventListener('popstate', () => {
                const hash = window.location.hash.substring(1);
                showTab(hash || 'overview', null); // Pass null for event on popstate
                 tabs.forEach(tab => {
                    if (tab.dataset.tab === (hash || 'overview')) {
                        tab.classList.add('tab-active');
                    } else {
                        tab.classList.remove('tab-active');
                    }
                });
            });
        });


        function toggleDetails(button, elementId) {
            const detailsElement = document.getElementById(elementId);
            if (detailsElement) {
                const isOpen = detailsElement.classList.toggle('open');
                button.classList.toggle('open', isOpen);
            }
        }
        
        document.getElementById('currentYear').textContent = new Date().getFullYear();

    </script>
</body>
</html>
